
UPDATE cdn_scripts
SET content = replace(
  replace(
    content,
    -- Replace the button rendering section (lines 365-398 area)
    E'                // Buttons\n                for (var bi = 0; bi < card.buttons.length; bi++) {\n                    var btnDiv = document.createElement(\'div\');\n                    btnDiv.className = \'bc-field\';\n                    btnDiv.style.cssText = \'flex-direction:row;align-items:center;gap:6px;\';\n                    var label = document.createElement(\'label\');\n                    label.style.minWidth = \'60px\';\n                    label.textContent = \'botÃ£o \' + (bi + 1) + (bi === 0 ? \' *\' : \'\');\n                    var inp = document.createElement(\'input\');\n                    inp.type = \'text\';\n                    inp.placeholder = \'Texto do botÃ£o\';\n                    inp.setAttribute(\'data-btn-idx\', bi);\n                    inp.value = card.buttons[bi];\n                    inp.style.flex = \'1\';\n                    btnDiv.appendChild(label);\n                    btnDiv.appendChild(inp);\n                    if (bi > 0) {\n                        var rmBtn = document.createElement(\'button\');\n                        rmBtn.textContent = \'âœ•\';\n                        rmBtn.style.cssText = \'background:#fee2e2;color:#dc2626;border:none;border-radius:4px;width:22px;height:22px;cursor:pointer;font-size:11px;flex-shrink:0;\';\n                        rmBtn.setAttribute(\'data-remove-btn\', ci + \'-\' + bi);\n                        btnDiv.appendChild(rmBtn);\n                    }\n                    cardEl.appendChild(btnDiv);\n                }',
    E'                // Buttons\n                for (var bi = 0; bi < card.buttons.length; bi++) {\n                    var btnData = card.buttons[bi];\n                    if (typeof btnData === \'string\') { btnData = { type: \'reply\', label: btnData, value: \'\' }; state.cards[ci].buttons[bi] = btnData; }\n                    var btnDiv = document.createElement(\'div\');\n                    btnDiv.className = \'bc-field\';\n                    btnDiv.style.cssText = \'flex-direction:column;gap:4px;padding:8px;background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;margin-bottom:6px;\';\n                    var btnHeader = document.createElement(\'div\');\n                    btnHeader.style.cssText = \'display:flex;align-items:center;gap:6px;\';\n                    var label = document.createElement(\'label\');\n                    label.style.cssText = \'min-width:50px;font-size:12px;font-weight:600;color:#374151;\';\n                    label.textContent = \'botÃ£o \' + (bi + 1) + (bi === 0 ? \' *\' : \'\');\n                    var sel = document.createElement(\'select\');\n                    sel.setAttribute(\'data-btn-type\', ci + \'-\' + bi);\n                    sel.style.cssText = \'border:1px solid #d1d5db;border-radius:6px;padding:4px 8px;font-size:12px;background:#fff;outline:none;cursor:pointer;\';\n                    sel.innerHTML = \'<option value="reply">ðŸ’¬ Resposta</option><option value="url">ðŸ”— URL</option><option value="copy">ðŸ“‹ Copiar</option><option value="call">ðŸ“ž Ligar</option>\';\n                    sel.value = btnData.type || \'reply\';\n                    btnHeader.appendChild(label);\n                    btnHeader.appendChild(sel);\n                    if (bi > 0) {\n                        var rmBtn = document.createElement(\'button\');\n                        rmBtn.textContent = \'âœ•\';\n                        rmBtn.style.cssText = \'background:#fee2e2;color:#dc2626;border:none;border-radius:4px;width:22px;height:22px;cursor:pointer;font-size:11px;flex-shrink:0;margin-left:auto;\';\n                        rmBtn.setAttribute(\'data-remove-btn\', ci + \'-\' + bi);\n                        btnHeader.appendChild(rmBtn);\n                    }\n                    btnDiv.appendChild(btnHeader);\n                    var inputsRow = document.createElement(\'div\');\n                    inputsRow.style.cssText = \'display:flex;gap:6px;align-items:center;\';\n                    var inp = document.createElement(\'input\');\n                    inp.type = \'text\';\n                    inp.placeholder = \'Texto do botÃ£o\';\n                    inp.setAttribute(\'data-btn-idx\', bi);\n                    inp.value = btnData.label || \'\';\n                    inp.style.cssText = \'flex:1;border:1px solid #d1d5db;border-radius:8px;padding:8px 12px;font-size:13px;outline:none;transition:border .15s;\';\n                    inputsRow.appendChild(inp);\n                    var valInput = document.createElement(\'input\');\n                    valInput.type = \'text\';\n                    valInput.setAttribute(\'data-btn-val\', bi);\n                    valInput.value = btnData.value || \'\';\n                    valInput.style.cssText = \'flex:1;border:1px solid #d1d5db;border-radius:8px;padding:8px 12px;font-size:13px;outline:none;transition:border .15s;\';\n                    var btype = btnData.type || \'reply\';\n                    if (btype === \'reply\') { valInput.style.display = \'none\'; }\n                    else if (btype === \'url\') { valInput.placeholder = \'https://exemplo.com\'; }\n                    else if (btype === \'copy\') { valInput.placeholder = \'CÃ³digo ou texto para copiar\'; }\n                    else if (btype === \'call\') { valInput.placeholder = \'+5511988888888\'; }\n                    inputsRow.appendChild(valInput);\n                    btnDiv.appendChild(inputsRow);\n                    cardEl.appendChild(btnDiv);\n                }'
  ),
  'v1.1.1',
  'v1.1.2'
),
updated_at = now()
WHERE id = 'a0fe7cb1-ac9d-420e-9b6c-51a34257b752';
